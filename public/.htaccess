# All Is Well Hospital - SEO Optimized .htaccess

# Enable rewrite engine
RewriteEngine On

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Remove trailing slashes (optional - keep URLs clean)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]

# SEO-friendly URL routing for React app
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.html [L]

# Compress text, html, css, javascript, xml, json
AddType text/html .html
AddType text/xml .xml
AddType text/json .json
AddType text/css .css
AddType text/javascript .js
AddType application/javascript .js

<IfModule mod_deflate.c>
 AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
 AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/json
</IfModule>

# Cache static files with improved cache lifetimes
<IfModule mod_expires.c>
  ExpiresActive on
 ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/x-javascript "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType text/javascript "access plus 1 year"
  ExpiresByType text/html "access plus 1 month"
  ExpiresByType text/xml "access plus 1 hour"
  ExpiresByType text/json "access plus 1 hour"
  ExpiresByType application/xml "access plus 1 hour"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/x-icon "access plus 1 year"
  ExpiresByType video/webm "access plus 1 year"
  ExpiresByType video/mp4 "access plus 1 year"
  ExpiresByType application/font-woff "access plus 1 year"
  ExpiresByType application/vnd.ms-fontobject "access plus 1 year"
  ExpiresByType application/x-font-ttf "access plus 1 year"
</IfModule>

# SECURITY HEADERS - Updated for Production
# Includes comprehensive security headers for Lighthouse Best Practices = 100%
Include /Users/macbook/MVA/MVA_ALL_IS_WELL/security-headers.conf

# Allow sitemap.xml and robots.txt to be accessed
<Files "sitemap.xml">
    Order Allow,Deny
    Allow from all
</Files>

<Files "robots.txt">
    Order Allow,Deny
    Allow from all
</Files>

# Handle API requests to seo_backend
RewriteRule ^seo_backend/(.*)$ seo_backend/$1 [L]
